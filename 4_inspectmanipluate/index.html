
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Genomics Aotearoa & NeSI">
      
      
        <link rel="canonical" href="https://genomicsaotearoa.github.io/shell-for-bioinformatics/4_inspectmanipluate/">
      
      
        <link rel="prev" href="../3_streams_red_pipe/">
      
      
        <link rel="next" href="../5_inspectmanipulate2/">
      
      
      <link rel="icon" href="../images/nesi_ga.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>3. Inspecting and Manipulating Text Data with Unix Tools - Part 1 - Intermediate Shell for Bioinformatics</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,300i,400,400i,700,700i%7CFira+Code:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Mukta";--md-code-font:"Fira Code"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#3-inspecting-and-manipulating-text-data-with-unix-tools-part-1" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Intermediate Shell for Bioinformatics" class="md-header__button md-logo" aria-label="Intermediate Shell for Bioinformatics" data-md-component="logo">
      
  <img src="../images/nesi_ga.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Intermediate Shell for Bioinformatics
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              3. Inspecting and Manipulating Text Data with Unix Tools - Part 1
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="custom" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/GenomicsAotearoa/shell-for-bioinformatics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GenomicsAotearoa/shell-for-bioinformatics
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Intermediate Shell for Bioinformatics" class="md-nav__button md-logo" aria-label="Intermediate Shell for Bioinformatics" data-md-component="logo">
      
  <img src="../images/nesi_ga.png" alt="logo">

    </a>
    Intermediate Shell for Bioinformatics
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/GenomicsAotearoa/shell-for-bioinformatics" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GenomicsAotearoa/shell-for-bioinformatics
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../1_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../2_download_data/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    1. Download &amp; Verify Data
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../3_streams_red_pipe/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    2. Streams, Redirection and Pipe
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    3. Inspecting and Manipulating Text Data with Unix Tools - Part 1
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    3. Inspecting and Manipulating Text Data with Unix Tools - Part 1
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extract-summary-information-with-wc" class="md-nav__link">
    <span class="md-ellipsis">
      Extract summary information with wc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cut-with-column-data-and-formatting-tabular-data-with-column" class="md-nav__link">
    <span class="md-ellipsis">
      Using cut with column data and formatting tabular data with column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sorting-plain-text-data-with-sort" class="md-nav__link">
    <span class="md-ellipsis">
      Sorting Plain-Text Data with sort
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-unique-values-with-uniq" class="md-nav__link">
    <span class="md-ellipsis">
      Finding Unique Values with uniq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joining-two-files-with-join" class="md-nav__link">
    <span class="md-ellipsis">
      Joining two files with join
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../5_inspectmanipulate2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    4. Inspecting and Manipulating Text Data with Unix Tools - Part 2
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../6_automate_fileprocessing_find_xargs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    5. Preview : Automating File-Processing with find and xargs
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../puzzles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Puzzles
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
        
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Supplementary 
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            Supplementary 
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supplementary%20/supplementary_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supp - 1. UNIX, Linux &amp; UNIX Shell
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supplementary%20/supplementary_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supp - 2. Unix Shell Basics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../supplementary%20/supplementary_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Supp - 3. Escaping and Special Characters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#extract-summary-information-with-wc" class="md-nav__link">
    <span class="md-ellipsis">
      Extract summary information with wc
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-cut-with-column-data-and-formatting-tabular-data-with-column" class="md-nav__link">
    <span class="md-ellipsis">
      Using cut with column data and formatting tabular data with column
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#sorting-plain-text-data-with-sort" class="md-nav__link">
    <span class="md-ellipsis">
      Sorting Plain-Text Data with sort
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#finding-unique-values-with-uniq" class="md-nav__link">
    <span class="md-ellipsis">
      Finding Unique Values with uniq
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#joining-two-files-with-join" class="md-nav__link">
    <span class="md-ellipsis">
      Joining two files with join
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="3-inspecting-and-manipulating-text-data-with-unix-tools-part-1">3. Inspecting and Manipulating Text Data with Unix Tools - Part 1<a class="headerlink" href="#3-inspecting-and-manipulating-text-data-with-unix-tools-part-1" title="Permanent link">&para;</a></h1>
<div class="admonition clipboard-list">
<p class="admonition-title">Lesson Objectives</p>
<ul>
<li>Inspect file/s with utilities such as <code>head</code>,<code>less</code>. </li>
<li>Extracting and formatting tabular data. </li>
<li>Magical <code>grep</code></li>
<li>use <code>sort</code>, <code>uniq</code>, <code>join</code> to manipulate the one or multiple files at once</li>
</ul>
</div>
<figure>
<p><a class="glightbox" href="../images/inspect_1.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="image" src="../images/inspect_1.png" width="350" /></a></p>
</figure>
<p>Many formats in bioinformatics are simple tabular plain-text files delimited by a character. The most common tabular plain-text file format used in bioinformatics is tab-delimited. Bioinformatics evolved to favor tab-delimited formats because of the convenience of working with these files using Unix tools.</p>
<div class="admonition info">
<p class="admonition-title">Tabular Plain-Text Data Formats</p>
<p>Tabular plain-text data formats are used extensively in computing. The basic format is
incredibly simple: each row (also known as a record) is kept on its own line, and each
column (also known as a field) is separated by some delimiter. There are three flavors
you will encounter: tab-delimited, comma-separated, and variable space-delimited.</p>
</div>
<details class="backward">
<summary>Recap - Inspecting data with <code>head</code> and <code>tail</code></summary>
<p>Although <code>cat</code> command is an easy way for us to open and view the content of a file, it is not very practical to do so for a file with thousands of lines as it will exhaust the shell "space". Instead, large files should be inspected first and then manipulated accordingly. The first round of inspection can be done with <code>head</code> and <code>tail</code> command which prints the first 10 lines and the last 10 lines (<code>-n 10</code>) of a a file, respectively. Let's use <code>head</code> and <code>tail</code> to inspect <em>Mus_musculus.GRCm38.75_chr1.bed</em> </p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>head<span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="m">1</span><span class="w">   </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="m">1</span><span class="w">   </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="m">1</span><span class="w">   </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a><span class="m">1</span><span class="w">   </span><span class="m">3102016</span><span class="w"> </span><span class="m">3102125</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="m">1</span><span class="w">   </span><span class="m">3102016</span><span class="w"> </span><span class="m">3102125</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="m">1</span><span class="w">   </span><span class="m">3102016</span><span class="w"> </span><span class="m">3102125</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="m">1</span><span class="w">   </span><span class="m">3205901</span><span class="w"> </span><span class="m">3671498</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="m">1</span><span class="w">   </span><span class="m">3205901</span><span class="w"> </span><span class="m">3216344</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a><span class="m">1</span><span class="w">   </span><span class="m">3213609</span><span class="w"> </span><span class="m">3216344</span>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="m">1</span><span class="w">   </span><span class="m">3205901</span><span class="w"> </span><span class="m">3207317</span>
</code></pre></div>
</details>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>tail<span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="m">1</span><span class="w">   </span><span class="m">195166217</span><span class="w">   </span><span class="m">195166390</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="m">1</span><span class="w">   </span><span class="m">195165745</span><span class="w">   </span><span class="m">195165851</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="m">1</span><span class="w">   </span><span class="m">195165748</span><span class="w">   </span><span class="m">195165851</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="m">1</span><span class="w">   </span><span class="m">195165745</span><span class="w">   </span><span class="m">195165747</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="m">1</span><span class="w">   </span><span class="m">195228278</span><span class="w">   </span><span class="m">195228398</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="m">1</span><span class="w">   </span><span class="m">195228278</span><span class="w">   </span><span class="m">195228398</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="m">1</span><span class="w">   </span><span class="m">195228278</span><span class="w">   </span><span class="m">195228398</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="m">1</span><span class="w">   </span><span class="m">195240910</span><span class="w">   </span><span class="m">195241007</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="m">1</span><span class="w">   </span><span class="m">195240910</span><span class="w">   </span><span class="m">195241007</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="m">1</span><span class="w">   </span><span class="m">195240910</span><span class="w">   </span><span class="m">195241007</span>
</code></pre></div>
</details>
</div>
<p>Changing the number of lines printed for either of those commands can be done by passing <code>-n &lt;number_of_lines&gt;</code> flag .i.e. Over-ride the <code>-n 10</code> default</p>
<p>Try those commands with <code>-n 4</code> to print top 4 lines and bottom 4 lines</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>head<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">4</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span>
</code></pre></div></p>
</details>
<p><br>
<br></p>
<details class="dumbbell" open="open">
<summary>Exercise 4.1</summary>
<p>Sometimes it’s useful to see both the beginning and end of a file — for example, if we have a sorted BED file and we want to see the positions of the first feature and last feature. Can you figure out a way to use both <code>head</code> and <code>tail</code> in a single command to inspect first and last 2 lines of <strong><em>Mus_musculus.GRCm38.75_chr1.bed</em></strong>?</p>
<details class="success">
<summary>solution</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">(</span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="p">;</span><span class="w"> </span>tail<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="o">)</span><span class="w"> </span>&lt;<span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed
</code></pre></div>
</details>
</details>
<details class="dumbbell" open="open">
<summary>Exercise 4.2</summary>
<p>We can also use tail to remove the header of a file. Normally the <code>-n</code> argument specifies how many of the last lines of a file to include, but if <code>-n</code> is given a number <code>x</code> preceded with a <code>+</code> sign (e.g., <code>+x</code> ), tail will start from the x<sup>th</sup> line. So to chop off a header, we start from the second line with <code>-n+2</code>.<br />
Use the <code>seq</code> command to generate a file containing the numbers 1 to 10, and then use the <code>tail</code> command to chop off the first line.</p>
<details class="success">
<summary>solution</summary>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a>seq 10 &gt; nums.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>cat<span class="w"> </span>nums.txt
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a>tail<span class="w"> </span>-n+2<span class="w"> </span>nums.txt
</code></pre></div></p>
</details>
</details>
<h2 id="extract-summary-information-with-wc">Extract summary information with <code>wc</code><a class="headerlink" href="#extract-summary-information-with-wc" title="Permanent link">&para;</a></h2>
<p>The "wc" in the <code>wc</code> command which stands for "word count" - this command can count the numbers of <strong>lines, words</strong>, and <strong>characters</strong> in a file (take a note on the order).</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>wc<span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="w">  </span><span class="m">81226</span><span class="w">  </span><span class="m">243678</span><span class="w"> </span><span class="m">1698545</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed
</code></pre></div>
</div>
<p>Often, we only need to list the number of lines, which can be done by using the <code>-l</code> flag. It can be used as a sanity check - for example, to make sure an output has the same number of lines as the input, OR to check that a certain file format which depends on another format without losing overall data structure wasn't corrupted or over/under manipulated. </p>
<div class="admonition question">
<p class="admonition-title">Question</p>
<p>Count the number of lines in <em>Mus_musculus.GRCm38.75_chr1.bed</em> and <em>Mus_musculus.GRCm38.75_chr1.gtf</em> . Anything out of the ordinary ? </p>
</div>
<p>Although <code>wc -l</code> is the quickest way to count the number of lines in a file, it is not the most robust as it relies on the very bad assumption that "data is well formatted" </p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<ul>
<li>
<p>For an example, if we are to create a file with 3 rows of data and then two empty lines by pressing <ins><strong>Enter</strong> twice</ins>, </p>
<blockquote>
<p><kbd>Ctrl</kbd>+<kbd>D</kbd> to end the edits started with <code>cat &gt;</code></p>
</blockquote>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>foo_wc.bed
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="w">  </span><span class="m">1</span><span class="w"> </span><span class="m">100</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="w">  </span><span class="m">2</span><span class="w"> </span><span class="m">200</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="w">  </span><span class="m">3</span><span class="w"> </span><span class="m">300</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="o">[</span>Press<span class="w"> </span>Enter<span class="o">]</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="o">[</span>Press<span class="w"> </span>Enter<span class="o">]</span>
</code></pre></div>
</blockquote>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a>wc<span class="w"> </span>-l<span class="w"> </span>foo_wc.bed<span class="w"> </span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a>  5 foo_wc.bed
</code></pre></div>
</blockquote>
</div>
<p>This is a good place to bring in <code>grep</code> again which can be used to count the number of lines while excluding white-spaces (spaces, tabs (<code>t</code>) or newlines (<code>n</code>))</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a>grep<span class="w"> </span>-c<span class="w"> </span><span class="s2">&quot;[^ \n\t]&quot;</span><span class="w"> </span>foo_wc.bed<span class="w"> </span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="w">  </span><span class="m">3</span>
</code></pre></div>
</blockquote>
</details>
<div class="admonition info"></div>
<ul>
<li><code>-c</code>: This option tells grep to output only a count of matching lines instead of the lines themselves.</li>
<li><code>"[^ \n\t]"</code>: This is a regular expression pattern:</li>
<li><code>[ ]</code>: Defines a character set<ul>
<li>When you place characters inside square brackets, you are specifying a set of characters, any one of which can match at that position in the string.</li>
<li>For example, <code>[abc]</code> matches any one of the characters <code>a</code>, <code>b</code>, or <code>c</code>.</li>
</ul>
</li>
<li><code>^</code>: Inside the brackets, this means "not"</li>
<li><code>\n</code>: Represents a newline character</li>
<li><code>\t</code>: Represents a tab character</li>
</ul>
<p>So <code>[^ \n\t]</code> means "match any character that is not a space, newline, or tab"</p>
</div>
<h2 id="using-cut-with-column-data-and-formatting-tabular-data-with-column">Using <code>cut</code> with column data and formatting tabular data with <code>column</code><a class="headerlink" href="#using-cut-with-column-data-and-formatting-tabular-data-with-column" title="Permanent link">&para;</a></h2>
<p>When working with plain-text tabular data formats like tab-delimited and CSV files, we often need to extract specific columns from the original file or stream. For example, suppose we wanted to extract only the start positions (the second column) of the <strong><em>Mus_musculus.GRCm38.75_chr1.bed</em></strong> file. The simplest way to do this is with <code>cut</code>.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">2</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="m">3054233</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="m">3054233</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a><span class="m">3054233</span>
</code></pre></div>
</blockquote>
<div class="admonition quote">
<p><code>-f</code>  argument is how we specify which columns to keep. It can be used to specify a range as well</p>
</div>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">2</span>-3<span class="w"> </span>Mus_musculus.GRCm38.75_chr1.bed<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="w"> </span><span class="m">3054233</span><span class="w">   </span><span class="m">3054733</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="w"> </span><span class="m">3054233</span><span class="w">   </span><span class="m">3054733</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="w"> </span><span class="m">3054233</span><span class="w">   </span><span class="m">3054733</span>
</code></pre></div>
</blockquote>
<div class="admonition info"></div>
<p><code>-f 2-3</code> is an option that tells cut to extract fields 2 and 3. In this context, fields are typically columns in a text file, separated by a delimiter (by default, a tab).</p>
</div>
<p>Using <code>cut</code>, we can convert our GTF for <strong><em>Mus_musculus.GRCm38.75_chr1.gtf</em></strong> to a three-column tab-delimited file of genomic ranges (e.g., chromosome, start, and end position). We’ll chop off the metadata rows using the grep command covered earlier and then use cut to extract the first, fourth, and fifth columns (chromosome, start, end):</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">1</span>,4,5<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
</code></pre></div>
</blockquote>
<details class="flushed">
<summary>Explain please</summary>
<ul>
<li><code>-v</code> inverts the match, selecting lines that do not match the pattern</li>
<li>
<p><code>"^#"</code> is a regular expression that matches lines starting with #</p>
<ul>
<li>In summary, <code>grep -v "^#" Mus_musculus.GRCm38.75_chr1.gtf</code> step removes all comment lines (which typically start with #) from the GTF file</li>
</ul>
</li>
<li>
<p><code>-f 1,4,5</code> specifies fields (columns) 1, 4, and 5 - In a GTF file, these columns typically represent:</p>
<ul>
<li>Field 1: Chromosome name</li>
<li>Field 4: Start position of the feature</li>
<li>Field 5: End position of the feature</li>
</ul>
</li>
</ul>
</details>
</div>
<p>Note that although our three-column file of genomic positions looks like a BED-formatted file, it’s not (due to subtle differences in genomic range formats).</p>
<p><code>cut</code> also allows us to specify the column delimiter character. So, if we were to come across a CSV file containing chromosome names, start positions, and end positions, we could select columns from it, too:</p>
<p>As you may have noticed when working with tab-delimited files, it’s not always easy to see which elements belong to a particular column. For example:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">1</span>-8<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="w">  </span><span class="m">1</span><span class="w">    </span>pseudogene<span class="w">  </span>gene<span class="w">    </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span><span class="w"> </span>.<span class="w">   </span>+<span class="w">   </span>.
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="w">  </span><span class="m">1</span><span class="w">    </span>unprocessed_pseudogene<span class="w">  </span>transcript<span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span><span class="w"> </span>.<span class="w">   </span>+<span class="w">   </span>.
<a id="__codelineno-24-3" name="__codelineno-24-3" href="#__codelineno-24-3"></a><span class="w">  </span><span class="m">1</span><span class="w">    </span>unprocessed_pseudogene<span class="w">  </span>exon<span class="w">    </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span><span class="w"> </span>.<span class="w">   </span>+<span class="w">   </span>.
</code></pre></div>
</blockquote>
</div>
<p>While tabs are a great delimiter in plain-text data files, our variable width data causes our columns to not stack up well. There’s a fix for this in Unix: program column <code>-t</code> (the <code>-t</code> option tells column to treat data as a table). The column -t command produces neat columns that are much easier to read:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f<span class="w"> </span><span class="m">1</span>-8<span class="w"> </span><span class="p">|</span><span class="w"> </span>column<span class="w"> </span>-t<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="w">   </span><span class="m">1</span><span class="w">  </span>pseudogene<span class="w">                          </span>gene<span class="w">         </span><span class="m">3054233</span><span class="w">    </span><span class="m">3054733</span><span class="w">    </span>.<span class="w">  </span>+<span class="w">  </span>.
<a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="w">   </span><span class="m">1</span><span class="w">  </span>unprocessed_pseudogene<span class="w">              </span>transcript<span class="w">   </span><span class="m">3054233</span><span class="w">    </span><span class="m">3054733</span><span class="w">    </span>.<span class="w">  </span>+<span class="w">  </span>.
<a id="__codelineno-26-3" name="__codelineno-26-3" href="#__codelineno-26-3"></a><span class="w">   </span><span class="m">1</span><span class="w">  </span>unprocessed_pseudogene<span class="w">              </span>exon<span class="w">         </span><span class="m">3054233</span><span class="w">    </span><span class="m">3054733</span><span class="w">    </span>.<span class="w">  </span>+<span class="w">  </span>.
</code></pre></div>
</blockquote>
</div>
<p>Note that you should only use <code>column -t</code> to visualize data in the terminal, not to reformat data to write to a file. Tab-delimited data is preferable to data delimited by a variable number of spaces, since it’s easier for programs to parse. Like <code>cut</code> , <code>column</code>’s default delimiter is the tab character (<code>\t</code> ). We can specify a different delimiter with the <code>-s</code> option. So, if we wanted to visualize the columns of the <strong><em>Mus_musculus.GRCm38.75_chr1_bed.csv</em></strong> file more easily, we could use:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a>column<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;,&quot;</span><span class="w"> </span>-t<span class="w"> </span>Mus_musculus.GRCm38.75_chr1_bed.csv<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-n<span class="w"> </span><span class="m">3</span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="w">    </span><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">    </span><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">    </span><span class="m">1</span><span class="w">  </span><span class="m">3054233</span><span class="w"> </span><span class="m">3054733</span>
</code></pre></div>
</blockquote>
</details>
<div class="admonition info"></div>
<ul>
<li><code>column</code>: This command is used to format its input into multiple columns.</li>
<li><code>-s ","</code>: This option specifies the separator character. In this case, it's set to a comma, which is typical for CSV files.</li>
<li><code>-t</code>: This option determines the number of columns automatically and creates a table.</li>
</ul>
</div>
<details class="warning">
<summary>Counting the number of columns of a <em>.gtf</em> with <code>grep</code> and <code>wc</code></summary>
<p><strong>GTF</strong> Format has 9 columns </p>
<table>
<thead>
<tr>
<th style="text-align: left;">1</th>
<th style="text-align: left;">2</th>
<th style="text-align: left;">3</th>
<th style="text-align: left;">4</th>
<th style="text-align: left;">5</th>
<th style="text-align: left;">6</th>
<th style="text-align: left;">7</th>
<th style="text-align: left;">8</th>
<th style="text-align: left;">9</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: left;">seqname</td>
<td style="text-align: left;">source</td>
<td style="text-align: left;">feature</td>
<td style="text-align: left;">start</td>
<td style="text-align: left;">end</td>
<td style="text-align: left;">score</td>
<td style="text-align: left;">strand</td>
<td style="text-align: left;">frame</td>
<td style="text-align: left;">attribute</td>
</tr>
</tbody>
</table>
<p>In theory, we should be able to use the following command to isolate the column headers and count the number</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-w
</code></pre></div>
However, this will return <strong>16</strong> and the problem is with the <strong>attribute</strong> column which is a <em>"A semicolon-separated list of tag-value pairs, providing additional information about each feature."</em></p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a>gene_id &quot;ENSMUSG00000090025&quot;; gene_name &quot;Gm16088&quot;; gene_source &quot;havana&quot;; gene_biotype &quot;pseudogene&quot;;
</code></pre></div>
Therefore, we need to <em>translate*</em> these values to a single "new line" with <code>tr</code> command and then count the number of lines than than the number of words</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>head<span class="w"> </span>-1<span class="w"> </span><span class="p">|</span><span class="w"> </span>tr<span class="w"> </span><span class="s1">&#39;\t&#39;</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</code></pre></div>
</details>
<h2 id="sorting-plain-text-data-with-sort">Sorting Plain-Text Data with <code>sort</code><a class="headerlink" href="#sorting-plain-text-data-with-sort" title="Permanent link">&para;</a></h2>
<p>Very often we need to work with sorted plain-text data in bioinformatics. The two most common reasons to sort data are as follows:</p>
<ul>
<li>Certain operations are much more efficient when performed on sorted data.</li>
<li>Sorting data is a prerequisite to finding all unique lines.</li>
</ul>
<p><code>sort</code>  is designed to work with plain-text data with columns. </p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<ul>
<li>
<p>Create a test .bed file with few rows and use <code>sort</code> command without any arguments.</p>
<blockquote>
<p><kbd>Ctrl</kbd>+<kbd>D</kbd> to end the edits started with <code>cat &gt;</code></p>
</blockquote>
</li>
</ul>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a>cat<span class="w"> </span>&gt;<span class="w"> </span>test_sort.bed
</code></pre></div>
<details class="database">
<summary>input for the <em>test_sort.bed</em> file</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>chr1<span class="w">    </span><span class="m">26</span><span class="w">  </span><span class="m">39</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>chr1<span class="w">    </span><span class="m">32</span><span class="w">  </span><span class="m">47</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>chr3<span class="w">    </span><span class="m">11</span><span class="w">  </span><span class="m">28</span>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>chr1<span class="w">    </span><span class="m">40</span><span class="w">  </span><span class="m">49</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>chr3<span class="w">    </span><span class="m">16</span><span class="w">  </span><span class="m">27</span>
<a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>chr1<span class="w">    </span><span class="m">9</span><span class="w">   </span><span class="m">28</span>
<a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>chr2<span class="w">    </span><span class="m">35</span><span class="w">  </span><span class="m">54</span>
<a id="__codelineno-33-8" name="__codelineno-33-8" href="#__codelineno-33-8"></a>chr1<span class="w">    </span><span class="m">10</span><span class="w">  </span><span class="m">19</span>
</code></pre></div>
</details>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>sort<span class="w"> </span>test_sort.bed<span class="w"> </span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>chr1<span class="w">    </span><span class="m">10</span><span class="w">  </span><span class="m">19</span>
<a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>chr1<span class="w">    </span><span class="m">26</span><span class="w">  </span><span class="m">39</span>
<a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>chr1<span class="w">    </span><span class="m">32</span><span class="w">  </span><span class="m">47</span>
<a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>chr1<span class="w">    </span><span class="m">40</span><span class="w">  </span><span class="m">49</span>
<a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>chr1<span class="w">    </span><span class="m">9</span><span class="w">   </span><span class="m">28</span>
<a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a>chr2<span class="w">    </span><span class="m">35</span><span class="w">  </span><span class="m">54</span>
<a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>chr3<span class="w">    </span><span class="m">11</span><span class="w">  </span><span class="m">28</span>
<a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>chr3<span class="w">    </span><span class="m">16</span><span class="w">  </span><span class="m">27</span>
</code></pre></div>
</details>
</div>
<p><code>sort</code> without any arguments simply sorts a file alphanumerically by line. Because chromosome is the first column, sorting by line effectively groups chromosomes together, as these are "ties" in the sorted order.</p>
<p>However, using <code>sort</code>’s default of sorting alphanumerically by line and doesn’t handle tabular data properly. There are two new features we need:</p>
<ul>
<li>
<p>The ability to sort by particular columns</p>
</li>
<li>
<p>The ability to tell sort that certain columns are numeric values (and not alpha‐numeric text)</p>
</li>
</ul>
<p><code>sort</code> has a simple syntax to do this. Let’s look at how we’d sort example.bed by chromosome (first column), and start position (second column):</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sort<span class="w"> </span>-k1,1<span class="w"> </span>-k2,2n<span class="w"> </span>test_sort.bed
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a>chr1<span class="w">    </span><span class="m">9</span><span class="w">   </span><span class="m">28</span>
<a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>chr1<span class="w">    </span><span class="m">10</span><span class="w">  </span><span class="m">19</span>
<a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a>chr1<span class="w">    </span><span class="m">26</span><span class="w">  </span><span class="m">39</span>
<a id="__codelineno-37-4" name="__codelineno-37-4" href="#__codelineno-37-4"></a>chr1<span class="w">    </span><span class="m">32</span><span class="w">  </span><span class="m">47</span>
<a id="__codelineno-37-5" name="__codelineno-37-5" href="#__codelineno-37-5"></a>chr1<span class="w">    </span><span class="m">40</span><span class="w">  </span><span class="m">49</span>
<a id="__codelineno-37-6" name="__codelineno-37-6" href="#__codelineno-37-6"></a>chr2<span class="w">    </span><span class="m">35</span><span class="w">  </span><span class="m">54</span>
<a id="__codelineno-37-7" name="__codelineno-37-7" href="#__codelineno-37-7"></a>chr3<span class="w">    </span><span class="m">11</span><span class="w">  </span><span class="m">28</span>
<a id="__codelineno-37-8" name="__codelineno-37-8" href="#__codelineno-37-8"></a>chr3<span class="w">    </span><span class="m">16</span><span class="w">  </span><span class="m">27</span>
</code></pre></div>
</details>
</div>
<div class="admonition quote">
<p>Here, we specify the columns (and their order) we want to sort by as <code>-k</code> arguments. In technical terms, <code>-k</code> specifies the sorting keys and their order. Each <code>-k</code> argument takes a range of columns as <code>start,end</code>, so to sort by a single column we use <code>start,start</code>. In the preceding example, we first sorted by the first column (chromosome), as the first <code>-k</code> argument was <code>-k1,1</code> . Sorting by the first column alone leads to many ties in rows
with the same chromosomes (e.g., “chr1” and “chr3”). Adding a second <code>-k</code> argument with a different column tells sort how to break these ties. In our example, <code>-k2,2n</code> tells sort to sort by the second column (start position), treating this column as numerical data (because there’s an <code>n</code> in <code>-k2,2n</code>).</p>
<p>The end result is that rows are grouped by chromosome and sorted by start position.</p>
</div>
<details class="question">
<summary>Exercise 4.3</summary>
<p><strong><em>Mus_musculus.GRCm38.75_chr1_random.gtf</em></strong> file is <strong><em>Mus_musculus.GRCm38.75_chr1.gtf</em></strong> with permuted rows (and without a metadata
header). Can you group rows by chromosome, and sort by position? If yes, append the output to a separate file.</p>
<details class="success">
<summary>solution</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-38-1" name="__codelineno-38-1" href="#__codelineno-38-1"></a>sort<span class="w"> </span>-k1,1<span class="w"> </span>-k4,4n<span class="w"> </span>Mus_musculus.GRCm38.75_chr1_random.gtf<span class="w"> </span>&gt;<span class="w"> </span>Mus_musculus.GRCm38.75_chr1_sorted.gtf
</code></pre></div>
</details>
</details>
<h2 id="finding-unique-values-with-uniq">Finding Unique Values with <code>uniq</code><a class="headerlink" href="#finding-unique-values-with-uniq" title="Permanent link">&para;</a></h2>
<p><code>uniq</code> takes lines from a file or standard input stream and outputs all lines with consecutive duplicates removed. While this is a relatively simple functionality, you will use <code>uniq</code> very frequently in command-line data processing.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-39-1" name="__codelineno-39-1" href="#__codelineno-39-1"></a>cat<span class="w"> </span>letters.txt<span class="w"> </span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-40-1" name="__codelineno-40-1" href="#__codelineno-40-1"></a>A<span class="w"> </span>
<a id="__codelineno-40-2" name="__codelineno-40-2" href="#__codelineno-40-2"></a>A
<a id="__codelineno-40-3" name="__codelineno-40-3" href="#__codelineno-40-3"></a>B
<a id="__codelineno-40-4" name="__codelineno-40-4" href="#__codelineno-40-4"></a>C
<a id="__codelineno-40-5" name="__codelineno-40-5" href="#__codelineno-40-5"></a>B
<a id="__codelineno-40-6" name="__codelineno-40-6" href="#__codelineno-40-6"></a>C
<a id="__codelineno-40-7" name="__codelineno-40-7" href="#__codelineno-40-7"></a>C
<a id="__codelineno-40-8" name="__codelineno-40-8" href="#__codelineno-40-8"></a>C
</code></pre></div>
</details>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-41-1" name="__codelineno-41-1" href="#__codelineno-41-1"></a>uniq<span class="w"> </span>letters.txt<span class="w"> </span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-42-1" name="__codelineno-42-1" href="#__codelineno-42-1"></a>A
<a id="__codelineno-42-2" name="__codelineno-42-2" href="#__codelineno-42-2"></a>B
<a id="__codelineno-42-3" name="__codelineno-42-3" href="#__codelineno-42-3"></a>C
<a id="__codelineno-42-4" name="__codelineno-42-4" href="#__codelineno-42-4"></a>B
<a id="__codelineno-42-5" name="__codelineno-42-5" href="#__codelineno-42-5"></a>C
</code></pre></div>
</blockquote>
</div>
<p>As you can see, <code>uniq</code> does not return the unique values in letters.txt — it only removes consecutive duplicate lines (keeping one). If instead we did want to find all unique lines in a file, we would first sort all lines using <code>sort</code> so that all identical lines are grouped next to each other, and then run <code>uniq</code>.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-43-1" name="__codelineno-43-1" href="#__codelineno-43-1"></a>sort<span class="w"> </span>letters.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-44-1" name="__codelineno-44-1" href="#__codelineno-44-1"></a>A
<a id="__codelineno-44-2" name="__codelineno-44-2" href="#__codelineno-44-2"></a>B
<a id="__codelineno-44-3" name="__codelineno-44-3" href="#__codelineno-44-3"></a>C
</code></pre></div>
</blockquote>
</div>
<p><code>uniq</code> with <code>-c</code> shows the counts of occurrences next to the unique lines.</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-45-1" name="__codelineno-45-1" href="#__codelineno-45-1"></a>sort<span class="w"> </span>letters.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-46-1" name="__codelineno-46-1" href="#__codelineno-46-1"></a><span class="w">      </span><span class="m">2</span><span class="w"> </span>A
<a id="__codelineno-46-2" name="__codelineno-46-2" href="#__codelineno-46-2"></a><span class="w">      </span><span class="m">2</span><span class="w"> </span>B
<a id="__codelineno-46-3" name="__codelineno-46-3" href="#__codelineno-46-3"></a><span class="w">      </span><span class="m">4</span><span class="w"> </span>C
</code></pre></div>
</blockquote>
</div>
<p>Combined with other Unix tools like <code>cut</code>, <code>grep</code> and <code>sort</code>, <code>uniq</code> can be used to summarize columns of tabular data:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-47-1" name="__codelineno-47-1" href="#__codelineno-47-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f3<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c
</code></pre></div>
<details class="success">
<summary>Output</summary>
<div class="highlight"><pre><span></span><code><a id="__codelineno-48-1" name="__codelineno-48-1" href="#__codelineno-48-1"></a><span class="m">25901</span><span class="w"> </span>CDS
<a id="__codelineno-48-2" name="__codelineno-48-2" href="#__codelineno-48-2"></a><span class="m">36128</span><span class="w"> </span>exon
<a id="__codelineno-48-3" name="__codelineno-48-3" href="#__codelineno-48-3"></a><span class="m">2027</span><span class="w"> </span>gene
<a id="__codelineno-48-4" name="__codelineno-48-4" href="#__codelineno-48-4"></a><span class="m">2290</span><span class="w"> </span>start_codon
<a id="__codelineno-48-5" name="__codelineno-48-5" href="#__codelineno-48-5"></a><span class="m">2299</span><span class="w"> </span>stop_codon
<a id="__codelineno-48-6" name="__codelineno-48-6" href="#__codelineno-48-6"></a><span class="m">4993</span><span class="w"> </span>transcript
<a id="__codelineno-48-7" name="__codelineno-48-7" href="#__codelineno-48-7"></a><span class="m">7588</span><span class="w"> </span>UTR
</code></pre></div>
</details>
</div>
<p>Count in order from most frequent to last</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-49-1" name="__codelineno-49-1" href="#__codelineno-49-1"></a>grep<span class="w"> </span>-v<span class="w"> </span><span class="s2">&quot;^#&quot;</span><span class="w"> </span>Mus_musculus.GRCm38.75_chr1.gtf<span class="w"> </span><span class="p">|</span><span class="w"> </span>cut<span class="w"> </span>-f3<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span><span class="p">|</span><span class="w"> </span>uniq<span class="w"> </span>-c<span class="w"> </span><span class="p">|</span><span class="w"> </span>sort<span class="w"> </span>-rn
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-50-1" name="__codelineno-50-1" href="#__codelineno-50-1"></a><span class="w">  </span><span class="m">36128</span><span class="w"> </span>exon
<a id="__codelineno-50-2" name="__codelineno-50-2" href="#__codelineno-50-2"></a><span class="w">  </span><span class="m">25901</span><span class="w"> </span>CDS
<a id="__codelineno-50-3" name="__codelineno-50-3" href="#__codelineno-50-3"></a><span class="w">   </span><span class="m">7588</span><span class="w"> </span>UTR
<a id="__codelineno-50-4" name="__codelineno-50-4" href="#__codelineno-50-4"></a><span class="w">   </span><span class="m">4993</span><span class="w"> </span>transcript
<a id="__codelineno-50-5" name="__codelineno-50-5" href="#__codelineno-50-5"></a><span class="w">   </span><span class="m">2299</span><span class="w"> </span>stop_codon
<a id="__codelineno-50-6" name="__codelineno-50-6" href="#__codelineno-50-6"></a><span class="w">   </span><span class="m">2290</span><span class="w"> </span>start_codon
<a id="__codelineno-50-7" name="__codelineno-50-7" href="#__codelineno-50-7"></a><span class="w">   </span><span class="m">2027</span><span class="w"> </span>gene
</code></pre></div>
</blockquote>
</div>
<div class="admonition abstract">
<ul>
<li><code>n</code> and <code>r</code> represents <em>numerical sort</em> and <em>reverse</em> order (Or descending as the default as ascending) </li>
</ul>
</div>
<h2 id="joining-two-files-with-join">Joining two files with <code>join</code><a class="headerlink" href="#joining-two-files-with-join" title="Permanent link">&para;</a></h2>
<div class="admonition pied-piper">
<p class="admonition-title">Prepare</p>
<p>Create a file named <em>example_lengths.txt</em> with following content</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-51-1" name="__codelineno-51-1" href="#__codelineno-51-1"></a>chr1<span class="w">    </span><span class="m">58352</span>
<a id="__codelineno-51-2" name="__codelineno-51-2" href="#__codelineno-51-2"></a>chr2<span class="w">    </span><span class="m">39521</span>
<a id="__codelineno-51-3" name="__codelineno-51-3" href="#__codelineno-51-3"></a>chr3<span class="w">    </span><span class="m">24859</span>
</code></pre></div>
</div>
<div class="admonition info"></div>
<p>The Unix tool <code>join</code> is used to join different files together by a common column. For example, we may want to add chromosome lengths recorded in example_lengths.txt to example.bed BED file, we saw earlier. The files look like this:</p>
<p>To do this, we need to join both of these tabular files by their common column, the one containing the chromosome names. But first, we first need to sort both files by the column to be joined on (join would not work otherwise):</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-52-1" name="__codelineno-52-1" href="#__codelineno-52-1"></a>sort<span class="w"> </span>-k1,1<span class="w"> </span>example.bed<span class="w"> </span>&gt;<span class="w"> </span>example_sorted.bed
</code></pre></div>
<div class="admonition info"></div>
<ul>
<li><code>-k1,1</code> : This option specifies the sorting key. Here's what it means:<ul>
<li><code>-k</code>: This flag indicates that you are specifying a sorting key.</li>
<li><code>1,1</code> : This means you are sorting based on the <strong>first field</strong> (column) of each line in the file. The syntax <code>1,1</code> indicates that the sort should start at the <strong>first field</strong> and <ins>end</ins> at the <strong>first field</strong>, meaning only the <strong>first field</strong> is considered for sorting.</li>
</ul>
</li>
</ul>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-53-1" name="__codelineno-53-1" href="#__codelineno-53-1"></a>sort<span class="w"> </span>-c<span class="w"> </span>-k1,1<span class="w"> </span>example_lengths.txt
</code></pre></div>
<div class="admonition info"></div>
<ul>
<li><code>-c</code>, <code>--check</code>, <code>--check=diagnose-first</code> = check for sorted input; do not sort<ul>
<li>When you use this option, <code>sort</code> does not <code>sort</code> the file; instead, it <ins>checks</ins> whether the file is already sorted according to the specified key. If the file is sorted correctly, it will exit with a status code of <code>0</code>. If the file is not sorted, it will exit with a status code of <code>1</code> and may print an error message indicating where the sorting order is violated.</li>
</ul>
</li>
</ul>
</div>
<p>The basic syntax is <code>join -1 &lt;file_1_field&gt; -2 &lt;file_2_field&gt; &lt;file_1&gt; &lt;file_2&gt;</code>. So, with <em>example.bed</em> and <em>example_lengths.txt</em> this would be:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-54-1" name="__codelineno-54-1" href="#__codelineno-54-1"></a>join<span class="w"> </span>-1<span class="w"> </span><span class="m">1</span><span class="w"> </span>-2<span class="w"> </span><span class="m">1</span><span class="w"> </span>example_sorted.bed<span class="w"> </span>example_lengths.txt<span class="w"> </span>&gt;<span class="w"> </span>example_with_lengths.txt
</code></pre></div>
<div class="admonition info"></div>
<ul>
<li><code>-1 1</code> : This option specifies the join field for the first file (example_sorted.bed). The -1 flag indicates which field from the first file to use for joining, and 1 refers to the first field (column).</li>
<li><code>-2 1</code> :This option specifies the join field for the second file (example_lengths.txt). Similar to -1, the -2 flag indicates which field from the second file to use for joining, and 1 again refers to the first field (column).</li>
</ul>
<p><ins>Inspect the file</ins>
<div class="highlight"><pre><span></span><code><a id="__codelineno-55-1" name="__codelineno-55-1" href="#__codelineno-55-1"></a>cat<span class="w"> </span>example_with_lengths.txt
</code></pre></div></p>
</div>
<p>There are many types of joins. For now, it’s important that we make sure join is working as we expect. Our expectation is that this join should not lead to fewer rows than in our example.bed file. We can verify this with <code>wc -l</code>:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-56-1" name="__codelineno-56-1" href="#__codelineno-56-1"></a>wc<span class="w"> </span>-l<span class="w"> </span>example_sorted.bed<span class="w"> </span>example_with_lengths.txt<span class="w"> </span>
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-57-1" name="__codelineno-57-1" href="#__codelineno-57-1"></a><span class="w">  </span><span class="m">8</span><span class="w"> </span>example_sorted.bed
<a id="__codelineno-57-2" name="__codelineno-57-2" href="#__codelineno-57-2"></a><span class="w">  </span><span class="m">8</span><span class="w"> </span>example_with_lengths.txt
<a id="__codelineno-57-3" name="__codelineno-57-3" href="#__codelineno-57-3"></a><span class="w"> </span><span class="m">16</span><span class="w"> </span>total
</code></pre></div>
</blockquote>
</div>
<p>However, look what happens if our second file, <em>example_lengths.txt</em> doesn’t have the lengths for <strong>chr3</strong>:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-58-1" name="__codelineno-58-1" href="#__codelineno-58-1"></a>head<span class="w"> </span>-n<span class="w"> </span><span class="m">2</span><span class="w"> </span>example_lengths.txt<span class="w"> </span>&gt;<span class="w"> </span>example_lengths_alt.txt<span class="w"> </span><span class="c1">#truncate file</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-59-1" name="__codelineno-59-1" href="#__codelineno-59-1"></a>join<span class="w"> </span>-1<span class="w"> </span><span class="m">1</span><span class="w"> </span>-2<span class="w"> </span><span class="m">1</span><span class="w"> </span>example_sorted.bed<span class="w"> </span>example_lengths_alt.txt
</code></pre></div></p>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-60-1" name="__codelineno-60-1" href="#__codelineno-60-1"></a>chr1<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-60-2" name="__codelineno-60-2" href="#__codelineno-60-2"></a>chr1<span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">39</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-60-3" name="__codelineno-60-3" href="#__codelineno-60-3"></a>chr1<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-60-4" name="__codelineno-60-4" href="#__codelineno-60-4"></a>chr1<span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-60-5" name="__codelineno-60-5" href="#__codelineno-60-5"></a>chr1<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-60-6" name="__codelineno-60-6" href="#__codelineno-60-6"></a>chr2<span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">39521</span>
</code></pre></div>
</blockquote>
</div>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-61-1" name="__codelineno-61-1" href="#__codelineno-61-1"></a>join<span class="w"> </span>-1<span class="w"> </span><span class="m">1</span><span class="w"> </span>-2<span class="w"> </span><span class="m">1</span><span class="w"> </span>example_sorted.bed<span class="w"> </span>example_lengths_alt.txt<span class="w"> </span><span class="p">|</span><span class="w"> </span>wc<span class="w"> </span>-l
</code></pre></div>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-62-1" name="__codelineno-62-1" href="#__codelineno-62-1"></a><span class="m">6</span>
</code></pre></div>
</blockquote>
</div>
<p>Because <strong>chr3</strong> is absent from <em>example_lengths_alt.txt</em>, our join omits rows from example_sorted.bed that do not have an entry in the first column of example_lengths_alt.txt. If we don’t want this behavior, we can use option -a to include unpairable lines—ones that do not have an entry in either file:</p>
<div class="admonition terminal">
<p class="admonition-title">code</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-63-1" name="__codelineno-63-1" href="#__codelineno-63-1"></a>join<span class="w"> </span>-1<span class="w"> </span><span class="m">1</span><span class="w"> </span>-2<span class="w"> </span><span class="m">1</span><span class="w"> </span>-a<span class="w"> </span><span class="m">1</span><span class="w"> </span>example_sorted.bed<span class="w"> </span>example_lengths_alt.txt<span class="w"> </span>
</code></pre></div>
<details class="success">
<summary>Output</summary>
<blockquote>
<div class="highlight"><pre><span></span><code><a id="__codelineno-64-1" name="__codelineno-64-1" href="#__codelineno-64-1"></a>chr1<span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">19</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-64-2" name="__codelineno-64-2" href="#__codelineno-64-2"></a>chr1<span class="w"> </span><span class="m">26</span><span class="w"> </span><span class="m">39</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-64-3" name="__codelineno-64-3" href="#__codelineno-64-3"></a>chr1<span class="w"> </span><span class="m">32</span><span class="w"> </span><span class="m">47</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-64-4" name="__codelineno-64-4" href="#__codelineno-64-4"></a>chr1<span class="w"> </span><span class="m">40</span><span class="w"> </span><span class="m">49</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-64-5" name="__codelineno-64-5" href="#__codelineno-64-5"></a>chr1<span class="w"> </span><span class="m">9</span><span class="w"> </span><span class="m">28</span><span class="w"> </span><span class="m">58352</span>
<a id="__codelineno-64-6" name="__codelineno-64-6" href="#__codelineno-64-6"></a>chr2<span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="m">54</span><span class="w"> </span><span class="m">39521</span>
<a id="__codelineno-64-7" name="__codelineno-64-7" href="#__codelineno-64-7"></a>chr3<span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">28</span>
<a id="__codelineno-64-8" name="__codelineno-64-8" href="#__codelineno-64-8"></a>chr3<span class="w"> </span><span class="m">16</span><span class="w"> </span><span class="m">27</span>
</code></pre></div>
</blockquote>
</details>
<div class="admonition info"></div>
<ul>
<li><code>-1 1</code>  : This option specifies that the join should use the <strong>first field</strong> of the <strong>first file</strong> (example_sorted.bed) as the key for joining. The <code>1</code> indicates that the key is in the first column of this file.</li>
<li><code>-2 1</code>  : This option specifies that the join should use the <strong>first field</strong> of the <strong>second file</strong> (example_lengths_alt.txt) as the key for joining. Similarly, the <code>1</code> indicates that the key is in the first column of this file.</li>
<li><code>-a 1</code> -  join command to include all lines from the first file (example_sorted.bed), even if there is no matching line in the second file. This is useful when you want to retain all records from the first file regardless of whether they find a match in the second file.</li>
</ul>
</div>
<p align="center"><b><a class="btn" href="https://genomicsaotearoa.github.io/shell-for-bioinformatics/" style="background: var(--bs-dark);font-weight:bold">Back to homepage</a></b></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../3_streams_red_pipe/" class="md-footer__link md-footer__link--prev" aria-label="Previous: 2. Streams, Redirection and Pipe">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                2. Streams, Redirection and Pipe
              </div>
            </div>
          </a>
        
        
          
          <a href="../5_inspectmanipulate2/" class="md-footer__link md-footer__link--next" aria-label="Next: 4. Inspecting and Manipulating Text Data with Unix Tools - Part 2">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                4. Inspecting and Manipulating Text Data with Unix Tools - Part 2
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Intermediate Shell for Bioinformatics workshop material is licensed under a <a rel="noopener" target="_blank" href="https://www.gnu.org/licenses/gpl-3.0.en.html">GNU General Public License v3.0</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.sections", "navigation.expand", "navigation.top", "navigation.footer", "content.code.copy", "content.code.annotate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
        <script src="../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>